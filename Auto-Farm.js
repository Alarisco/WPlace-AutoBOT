/* WPlace AutoBOT â€” uso bajo tu responsabilidad. Compilado 2025-08-15T08:21:32.053Z */
(()=>{function p(e=document.body){let t=document.createElement("div");t.id="wplace-bot-root",e.appendChild(t);let n=t.attachShadow?t.attachShadow({mode:"open"}):t;return{host:t,root:n}}function m(e,t){let n=0,o=0,a=!1;e.style.cursor="move",e.addEventListener("mousedown",r=>{a=!0,n=r.clientX-t.offsetLeft,o=r.clientY-t.offsetTop}),document.addEventListener("mousemove",r=>{a&&(t.style.left=`${r.clientX-n}px`,t.style.top=`${r.clientY-o}px`)}),document.addEventListener("mouseup",()=>a=!1)}function f({title:e="WPlace BOT"}={}){let{host:t,root:n}=p(),o=document.createElement("div");o.style.cssText="position:fixed; top:20px; left:20px; z-index:999999; background:#111; color:#eee; font:12px system-ui; border:1px solid #333; border-radius:10px; overflow:hidden; min-width:260px; box-shadow:0 8px 24px rgba(0,0,0,.5)";let a=document.createElement("div");a.style.cssText="background:#1f2937; padding:8px 10px; font-weight:600",a.textContent=e;let r=document.createElement("div");r.style.cssText="padding:10px; display:flex; gap:8px; flex-direction:column;";let i=document.createElement("div");i.textContent="Iniciando\u2026",r.appendChild(i),o.appendChild(a),o.appendChild(r),n.appendChild(o),m(a,o);let c={};function k(s,P){c[s]=P}let l=document.createElement("div");l.style.cssText="display:flex; gap:6px; flex-wrap:wrap;";let d=document.createElement("button");d.textContent="Cargar Farm",d.onclick=()=>{var s;return(s=c.loadFarm)==null?void 0:s.call(c)};let u=document.createElement("button");return u.textContent="Cargar Image",u.onclick=()=>{var s;return(s=c.loadImage)==null?void 0:s.call(c)},l.appendChild(d),l.appendChild(u),r.appendChild(l),{root:n,host:t,setStatus:s=>i.textContent=s,on:k,destroy:()=>t.remove()}}function x(){let e=f({title:"Auto-Farm"});return e.setStatus("Listo para iniciar"),e}var w=!1;async function h(e){w||(await new Promise((t,n)=>{let o=document.createElement("script");o.src="https://challenges.cloudflare.com/turnstile/v0/api.js",o.async=!0,o.defer=!0,o.onload=()=>t(),o.onerror=()=>n(new Error("Turnstile load failed")),document.head.appendChild(o)}),w=!0)}function y(e,t="paint"){return new Promise((n,o)=>{if(!window.turnstile)return o(new Error("Turnstile no disponible"));window.turnstile.render(document.createElement("div"),{sitekey:e,action:t,callback:a=>n(a),"error-callback":()=>o(new Error("Turnstile error"))})})}async function g(e,{timeout:t=1e4,...n}={}){let o=new AbortController,a=setTimeout(()=>o.abort("timeout"),t);try{return await fetch(e,{signal:o.signal,...n})}finally{clearTimeout(a)}}var B="https://wplace.winnalabs.com/api";async function T({tileX:e,tileY:t,pixels:n,turnstileToken:o}){let a=JSON.stringify({pixels:n,token:o}),r=await g(`${B}/s0/pixel/${e}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:a,credentials:"include"});if(r.status===200)try{return await r.json()}catch{return{ok:!0}}let i=`HTTP ${r.status}`;try{let c=await r.json();i=(c==null?void 0:c.message)||i}catch{}throw new Error(`paint failed: ${i}`)}function E(e,t,n=.05){let a=Math.floor(3e3*n),r=Math.floor(Math.random()*(3e3-2*a))+a,i=Math.floor(Math.random()*(3e3-2*a))+a;return{x:r,y:i,absX:e*3e3+r,absY:t*3e3+i}}function b(e){return e[Math.floor(Math.random()*e.length)]}async function F({tileX:e,tileY:t,palette:n,siteKey:o}){await h(o);let a=await y(o,"paint"),r=E(e,t),i=[{x:r.x,y:r.y,color:b(n)}];return T({tileX:e,tileY:t,pixels:i,turnstileToken:a})}async function C(e,t){for(;e.running;)try{await F(e),t==null||t("Pintado OK; aplicando cooldown\u2026"),await new Promise(n=>setTimeout(n,e.cooldownMs||3e4))}catch(n){t==null||t("Error: "+n.message+" (reintentando)"),await new Promise(o=>setTimeout(o,5e3))}}async function v(){let e=x(),t={running:!0,tileX:0,tileY:0,palette:["#000000","#ffffff"],siteKey:"TU_TURNSTILE_SITEKEY",cooldownMs:3e4};window.__wplaceBot.stop=()=>(t.running=!1,e.setStatus("Detenido")),await C(t,n=>e.setStatus(n))}(()=>{"use strict";var e;if((e=window.__wplaceBot)!=null&&e.running){alert("WPlace BOT ya est\xE1 corriendo.");return}window.__wplaceBot={running:!0},v().catch(t=>{console.error("[BOT] Error en Auto-Farm:",t),window.__wplaceBot.running=!1,alert("Auto-Farm: error inesperado. Revisa consola.")})})();})();
