/* WPlace AutoBOT â€” uso bajo tu responsabilidad. Compilado 2025-08-15T08:21:32.053Z */
(()=>{function u(o=document.body){let t=document.createElement("div");t.id="wplace-bot-root",o.appendChild(t);let n=t.attachShadow?t.attachShadow({mode:"open"}):t;return{host:t,root:n}}function m(o,t){let n=0,e=0,r=!1;o.style.cursor="move",o.addEventListener("mousedown",a=>{r=!0,n=a.clientX-t.offsetLeft,e=a.clientY-t.offsetTop}),document.addEventListener("mousemove",a=>{r&&(t.style.left=`${a.clientX-n}px`,t.style.top=`${a.clientY-e}px`)}),document.addEventListener("mouseup",()=>r=!1)}function f({title:o="WPlace BOT"}={}){let{host:t,root:n}=u(),e=document.createElement("div");e.style.cssText="position:fixed; top:20px; left:20px; z-index:999999; background:#111; color:#eee; font:12px system-ui; border:1px solid #333; border-radius:10px; overflow:hidden; min-width:260px; box-shadow:0 8px 24px rgba(0,0,0,.5)";let r=document.createElement("div");r.style.cssText="background:#1f2937; padding:8px 10px; font-weight:600",r.textContent=o;let a=document.createElement("div");a.style.cssText="padding:10px; display:flex; gap:8px; flex-direction:column;";let i=document.createElement("div");i.textContent="Iniciando\u2026",a.appendChild(i),e.appendChild(r),e.appendChild(a),n.appendChild(e),m(r,e);let s={};function v(c,k){s[c]=k}let l=document.createElement("div");l.style.cssText="display:flex; gap:6px; flex-wrap:wrap;";let d=document.createElement("button");d.textContent="Cargar Farm",d.onclick=()=>{var c;return(c=s.loadFarm)==null?void 0:c.call(s)};let p=document.createElement("button");return p.textContent="Cargar Image",p.onclick=()=>{var c;return(c=s.loadImage)==null?void 0:c.call(s)},l.appendChild(d),l.appendChild(p),a.appendChild(l),{root:n,host:t,setStatus:c=>i.textContent=c,on:v,destroy:()=>t.remove()}}function x(){let o=f({title:"Auto-Image"});return o.setStatus("Carga una imagen y configura opciones"),o}var h=!1;async function w(o){h||(await new Promise((t,n)=>{let e=document.createElement("script");e.src="https://challenges.cloudflare.com/turnstile/v0/api.js",e.async=!0,e.defer=!0,e.onload=()=>t(),e.onerror=()=>n(new Error("Turnstile load failed")),document.head.appendChild(e)}),h=!0)}function g(o,t="paint"){return new Promise((n,e)=>{if(!window.turnstile)return e(new Error("Turnstile no disponible"));window.turnstile.render(document.createElement("div"),{sitekey:o,action:t,callback:r=>n(r),"error-callback":()=>e(new Error("Turnstile error"))})})}async function y(o,{timeout:t=1e4,...n}={}){let e=new AbortController,r=setTimeout(()=>e.abort("timeout"),t);try{return await fetch(o,{signal:e.signal,...n})}finally{clearTimeout(r)}}var I="https://wplace.winnalabs.com/api";async function b({tileX:o,tileY:t,pixels:n,turnstileToken:e}){let r=JSON.stringify({pixels:n,token:e}),a=await y(`${I}/s0/pixel/${o}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:r,credentials:"include"});if(a.status===200)try{return await a.json()}catch{return{ok:!0}}let i=`HTTP ${a.status}`;try{let s=await a.json();i=(s==null?void 0:s.message)||i}catch{}throw new Error(`paint failed: ${i}`)}async function T({batches:o,siteKey:t},n){await w(t);for(let e of o){let r=await g(t,"paint");await b({tileX:e.tileX,tileY:e.tileY,pixels:e.pixels,turnstileToken:r}),n==null||n(`Tile ${e.tileX},${e.tileY} OK (${e.pixels.length} px)`)}}function E(o){let n=new Map;for(let e of o){let r=Math.floor(e.absX/3e3),a=Math.floor(e.absY/3e3),i=`${r},${a}`;n.has(i)||n.set(i,{tileX:r,tileY:a,pixels:[]}),n.get(i).pixels.push({x:e.absX-r*3e3,y:e.absY-a*3e3,color:e.color})}return[...n.values()]}async function C(){let o=x(),n=E([{absX:100,absY:200,color:"#000"}]);window.__wplaceBot.stop=()=>o.setStatus("Detenido"),await T({batches:n,siteKey:"TU_TURNSTILE_SITEKEY"},e=>o.setStatus(e))}(()=>{"use strict";var o;if((o=window.__wplaceBot)!=null&&o.running){alert("WPlace BOT ya est\xE1 corriendo.");return}window.__wplaceBot={running:!0},C().catch(t=>{console.error("[BOT] Error en Auto-Image:",t),window.__wplaceBot.running=!1,alert("Auto-Image: error inesperado. Revisa consola.")})})();})();
